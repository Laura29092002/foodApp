<button class="back" (click)="onCancel()">
    <img src="https://img.icons8.com/?size=100&id=101380&format=png&color=774b2e">
    Retour
</button>
<div class="center">
    <div class="h2 taille">
        <img src="https://img.icons8.com/?size=100&id=10053&format=png&color=774b2e" alt="Calandar">
        <h2>Modifier mon planning de la semaine</h2>
    </div>
    

    <p>Vous pouvez réorganiser l'emplacement des recettes en les sélectionnant et déposant à l'endroit souhaité. Vous pouvez également changer les recettes via le bouton crayon.</p>
    <button (click)="generate()">Générer votre planning</button>
    <div cdkDropListGroup class="planning">
        @for(day of days; track day.id;){
            <div cdkDropList
                [cdkDropListData]="day.listOfRecipe!"
                (cdkDropListDropped)="drop($event)"
                class="day">
                <h3>{{day.name}}</h3>
                
                    <div class="meal-slot">
                    @if(day.listOfRecipe && day.listOfRecipe.length > 0 && day.listOfRecipe[0]){
                        @if(day.listOfRecipe[0].id != 0){
                        <div cdkDrag>
                            <app-recipe-day-card [recipe]="day.listOfRecipe[0]" [dayId]="day.id" [typeOfMeal]='"lunch"'></app-recipe-day-card>
                        </div>
                    }
                    @else{
                        <button (click)="addLunchRecipe(day.id)" class="add-btn" title="Ajouter une recette">
                            <img src="https://img.icons8.com/?size=100&id=60953&format=png&color=774b2e" alt="Add">
                            <span>Ajouter le déjeuner</span>
                        </button>
                    }
                    }@else{
                        <button (click)="addLunchRecipe(day.id)" class="add-btn" title="Ajouter une recette">
                            <img src="https://img.icons8.com/?size=100&id=60953&format=png&color=774b2e" alt="Add">
                            <span>Ajouter le déjeuner</span>
                        </button>
                    }
                </div>
                <div class="meal-slot">
                    @if(day.listOfRecipe && day.listOfRecipe.length > 0 && day.listOfRecipe[1]){
                        @if(day.listOfRecipe[1].id != 0){
                            <div cdkDrag>
                                <app-recipe-day-card [recipe]="day.listOfRecipe[1]" [dayId]="day.id" [typeOfMeal]='"dinner"'></app-recipe-day-card>
                            </div>
                        }@else{
                        <button (click)="addDinnerRecipe(day.id)" class="add-btn" title="Ajouter une recette">
                            <img src="https://img.icons8.com/?size=100&id=60953&format=png&color=774b2e" alt="Add">
                            <span>Ajouter le dîner</span>
                        </button>
                    }
                    }@else{
                        <button (click)="addDinnerRecipe(day.id)" class="add-btn" title="Ajouter une recette">
                            <img src="https://img.icons8.com/?size=100&id=60953&format=png&color=774b2e" alt="Add">
                            <span>Ajouter le dîner</span>
                        </button>
                    }
                    
                    
                </div>
                
                

            </div>
        }
    </div>

<div class="buttons">
    <button class="cancel" (click)="onCancel()">
          <img src="https://img.icons8.com/?size=100&id=83143&format=png&color=FFDB4D">
          Annuler
        </button>
    <button class="submit" (click)="onUpdate()">
        <img src="https://img.icons8.com/?size=100&id=l9lZ9gsA8vxG&format=png&color=774b2e" alt="save">
        Enregistrer mes modifications</button>
    </div>
</div>
