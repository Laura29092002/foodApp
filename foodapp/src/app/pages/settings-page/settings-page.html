<div class="table-ing">
    <div class="h2">
        <img src="https://img.icons8.com/?size=100&id=4GLxWBxj9TSR&format=png&color=774b2e" alt="Fast food">
        <h2>Gestionnaire des ingrédients</h2>
    </div>
@if(isOpen){
    <app-ingredient-form (add)="reload($event)"></app-ingredient-form>
    <button (click)="addIngredient()" class="cancel">
        <img src="https://img.icons8.com/?size=100&id=83143&format=png&color=FFDB4D">
        Annuler
    </button>
}@else{
    <button (click)="addIngredient()">
        <img src="https://img.icons8.com/?size=100&id=85096&format=png&color=774b2e" alt="add">
        Ajouter un ingrédient
    </button>
}


<table>
    <tr>
        <th>Nom</th>
        <th>Icone</th>
        <th>Unité</th>
        <th>Catégorie</th>
        <th></th>
        <th></th>
    </tr>
    @for(ingredient of ingredients; let i = $index; track ingredient.id){
        <tr>
            @if(editingId === ingredient.id){
                <td><input type="text" [(ngModel)]="editedIngredient.name" /></td>
                <td><input type="text" [(ngModel)]="editedIngredient.image" /></td>
                <td><input type="text" [(ngModel)]="editedIngredient.unit"/></td>
                <td><input type="text" [(ngModel)]="editedIngredient.categoryId" /></td>
                <td (click)="saveIngredient(i)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"/></svg>
                </td>
                <td (click)="cancelEdit()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </td>
            }@else{
                <td>{{ingredient.name}}</td>
                <td>{{ingredient.image}}</td>
                @if(ingredient.unit){
                    <td>{{ingredient.unit}}</td>
                }@else {
                    <td class="not-unit">Sans unité</td>
                }
                <td>{{categories[ingredient.categoryId!-1].name}}</td>
                <td (click)="updateIngredient(ingredient)" class="btn" title="Modifier">
                    <img src="https://img.icons8.com/?size=100&id=59729&format=png&color=774b2e" alt="Ball Point Pen">
                </td>
                <td (click)="deleteIngredient(ingredient.id, i)" class="btn" title="Supprimer">
                    <img src="https://img.icons8.com/?size=100&id=67884&format=png&color=774b2e" alt="Delete">
                </td>
            }
        </tr>
    }
</table>
</div>