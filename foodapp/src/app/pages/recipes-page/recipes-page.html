@if(isSelecting){
    <button class="back" (click)="onCancel()">
        <img src="https://img.icons8.com/?size=100&id=101380&format=png&color=774b2e">
        Retour
    </button>
}

@if(isSelecting){
    @if(this.selectedRecipe){
        <div class="select-info">
            <p>✓ Vous avez sélectionné : <strong>{{ selectedRecipe.name }}</strong></p>
        </div>
    }@else {
        <div class="select-info">
            <p>Veuillez sélectionner la recette que vous souhaitez en cliquant sur celle-ci</p>
        </div>
    }
}

<div class="all">
@if(regime && regime!="Pas de préférence"){
    <div class="containerPreference">
    
    <div class="h2 left">
        <img src="https://img.icons8.com/?size=100&id=86733&format=png&color=774b2e" alt="trust">
        <h2>Suggestion : {{regime}}</h2>
    </div>
    
    <div class="carroussel">
    <button (click)="previousPage()" class="btn-arrow">
            <img src="https://img.icons8.com/?size=100&id=99985&format=png&color=774b2e" alt="back to">
        </button>
    <div class="recipesPreference">
        @if(isloading){
            <app-loader/>
        }
        @for(recipe of paginatedItems; track recipe.id){
            <app-big-recipe-card 
                [recipe]="recipe" 
                [selected]="selectedRecipe?.id === recipe.id" 
                [editionMode]="editionMode" 
                (select)="onSelectRecipe($event)">
            </app-big-recipe-card>
        }
    </div>
    <button (click)="nextPage()" class="btn-arrow">
        <img src="https://img.icons8.com/?size=100&id=98971&format=png&color=774b2e" alt="next Page">
    </button>
    </div>
    
</div>
}


<div class="container">
    <div class="section">
        <div class="h2">
            <img src="https://img.icons8.com/?size=100&id=CrV1obVLC0BA&format=png&color=774b2e" alt="Kiosk on Wheels">
            <h2>Toutes les recettes</h2>
        </div>
        <div class="searchbar">
            <img src="https://img.icons8.com/?size=100&id=59878&format=png&color=774b2e" alt="search">
            <input type="text" placeholder="Rechercher une recette..." [(ngModel)]="searchTerm">
        </div>
        @if(!isSelecting){
            <button class="cancel" (click)="addRecipe()">
                <img src="https://img.icons8.com/?size=100&id=60953&format=png&color=ffe57f" alt="Add">
                Ajouter une recette
            </button>
        }
    </div>
    
    <div class="recipes">
        @if(isloading){
            <app-loader/>
        }
        @for(recipe of filteredRecipes(); track recipe.id){
            <app-big-recipe-card 
                [recipe]="recipe" 
                [selected]="selectedRecipe?.id === recipe.id" 
                [editionMode]="editionMode" 
                (select)="onSelectRecipe($event)">
            </app-big-recipe-card>
        }
    </div>
    
    <div class="norecipe">
        @if(filteredRecipes().length == 0 && isloading == false){
            <img src="assets/default.png" />
            <p>Il n'existe pas de recette correspondant à votre recherche.<br> N'hésitez pas à créer la vôtre!</p>
        }
    </div> 
</div>

</div>


@if(isSelecting && this.selectedRecipe){
    <button class="add-recipe" (click)="addRecipeToPlanning()">
        <img src="https://img.icons8.com/?size=100&id=60953&format=png&color=FFDB4D" alt="Add">
        Ajouter la recette au planning
    </button>
}